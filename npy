import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.IOException;
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

public class JSONToPipeDelimited {

    public static void main(String[] args) {
        String json = "{ \"name\": \"John Doe\", \"age\": 30, \"city\": \"New York\" }"; // Replace with your JSON data

        try {
            JSONObject jsonObject = new JSONObject(json);
            String pipeDelimitedData = convertToPipeDelimited(jsonObject);
            writeToFile(pipeDelimitedData, "output.txt"); // Replace with your desired output file path
            System.out.println("Conversion completed successfully!");
        } catch (JSONException e) {
            System.out.println("Invalid JSON format: " + e.getMessage());
        } catch (IOException e) {
            System.out.println("Error writing to file: " + e.getMessage());
        }
    }

    private static String convertToPipeDelimited(JSONObject jsonObject) throws JSONException {
        StringBuilder pipeDelimitedData = new StringBuilder();

        String[] keys = JSONObject.getNames(jsonObject);
        if (keys != null) {
            for (String key : keys) {
                pipeDelimitedData.append(jsonObject.get(key)).append("|");
            }
            pipeDelimitedData.deleteCharAt(pipeDelimitedData.length() - 1); // Remove the last pipe delimiter
        }

        return pipeDelimitedData.toString();
    }

    private static void writeToFile(String data, String filePath) throws IOException {
        BufferedWriter writer = new BufferedWriter(new FileWriter(filePath));
        writer.write(data);
        writer.close();
    }
}
